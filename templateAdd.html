<!DOCTYPE html>
<html id="child-html" lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:include="util/common_css"></div>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
</head>
<style type="text/css">
    .row .form-group .col-sm-1{
        width: 150px;
    }
    .row .form-group .col-sm-5{
        line-height: 34px;
        height: 34px;
    }
    th,td{
        text-align: center;
    }
    body{
        overflow-x:auto
    }
    #pcont{
        display:block;
    }
    .menu-space{height:1000px !important}

    .editor-slt-box{ position:relative; width:100%; font-size:14px; display:table;}
    .editor-slt-box .editor-input,.editor-slt-box .editor-select,.editor-slt-box .editor-del{ display:table-cell}
    .editor-slt-box .editor-input {
        position:absolute; top:6px; left:12px;
        background-color:#fff;
        border:0 none;
        vertical-align: middle;
        line-height:1.42857;
        box-shadow:none;
        width:60%;
    }

    .editor-slt-box .editor-select{
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        display: block;
        font-size: 14px;
        height: 34px;
        line-height: 1.6;
        padding: 6px 12px;
        transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        width: 98%;
    }
    .editor-slt-box .editor-del{
        background-color: #eee;
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        font-size: 14px;
        font-weight: 400;
        line-height: 1;
        padding: 6px 12px;
        text-align: center;
        cursor:pointer;
        vertical-align: middle;
        white-space: nowrap;
        width: 1%;
    }
    .editor-del .glyphicon{ padding-right:0;}

    .editor-slt-box{ position:relative; width:100%; font-size:14px; display:table;}
    .editor-slt-box .editor-input_1,.editor-slt-box .editor-select_1,.editor-slt-box .editor-del_1{ display:table-cell}
    .editor-slt-box .editor-input_1 {
        position:absolute; top:6px; left:12px;
        background-color:#fff;
        border:0 none;
        vertical-align: middle;
        line-height:1.42857;
        box-shadow:none;
        width:60%;
    }

    .editor-slt-box .editor-select_1{
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        display: block;
        font-size: 14px;
        height: 34px;
        line-height: 1.6;
        padding: 6px 12px;
        transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        width: 98%;
    }
    .editor-slt-box .editor-del_1{
        background-color: #eee;
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        font-size: 14px;
        font-weight: 400;
        line-height: 1;
        padding: 6px 12px;
        text-align: center;
        cursor:pointer;
        vertical-align: middle;
        white-space: nowrap;
        width: 1%;
    }
    .editor-del .glyphicon{ padding-right:0;}
    .table-wrap{
        overflow-x:auto;
    }
    .cl-sidebar{
        width:216px;
        display:block;
        position:inherit;
    }
</style>
<body>
<div th:include="util/common_header"></div>
<div id="cl-wrapper" class="fixed-menu" style="width:1900px">
    <div class="cl-sidebar">
        <div class="cl-sidebar" th:include="util/page_left"></div>
    </div>
    <div class="container-fluid" id="pcont">
        <div class="page-head">
            <ol class="breadcrumb">
                <li><a href="custom/home">首页</a></li>
                <li><a href="#">话单分析</a></li>
                <li class="active">话单模板管理</li>
            </ol>
        </div>
        <div class="cl-mcont">
            <form id="file-form">
                <div class="form-style">
                    <div class="row">
                        <div class="form-group col-md-12 clearfix">
                            <label class="col-sm-1 control-label text-right">模板名称：</label>
                            <div class="col-sm-5">
                                <input name="templateName" type="text" class="form-control"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12 clearfix">
                            <label class="col-sm-1 control-label text-right">字符集：</label>
                            <div class="col-sm-5">
                                <select name="encoding" class="form-control">
                                    <option>--请选择--</option>
                                    <option>GBK</option>
                                    <option>UTF-8</option>
                                    <option>ISO-8859-1</option>
                                    <option>US-ASCII</option>
                                    <option>UTF-16</option>
                                    <option>UTF-16BE</option>
                                    <option>UTF-16LE</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label class="col-sm-1 control-label text-right">文件：</label>
                            <div class="col-sm-5">
                                <input id="attachFile" type="file" name="multipartFile"  class="form-control fjsc"/>
                            </div>
                            <button type="button" id="uploadFile" class="btn btn-primary">上传</button>
                            <input type="hidden" name="headStr"/>
                            <input type="hidden" name="firstLine"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label class="col-sm-1 control-label text-right">是否为表格文件：</label>
                            <div class="col-sm-5">
                                <label class="pull-left"><input type="radio" name="fileType" value="EXCEL"/> 是</label>
                                <label class="pull-left m-l-15"><input type="radio" name="fileType" value="CSV"/> 否</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label class="col-sm-1 control-label text-right">分隔符：</label>
                            <div id="separator" class="col-sm-5">
                                <label class="pull-left"><input type="radio" name="splitColumn" value="    " v-bind="separator"/>TAB键</label>
                                <label class="pull-left m-l-15"><input type="radio" name="splitColumn" value=";" v-bind="separator"/>分号</label>
                                <label class="pull-left m-l-15"><input type="radio" name="splitColumn" value="," v-bind="separator"/>逗号</label>
                                <label class="pull-left m-l-15"><input type="radio" name="splitColumn"  value=" " v-bind="separator"/>空格</label>
                                <label class="pull-left m-l-15"><input id="customInput" type="radio" name="splitColumn" value="" v-bind="separator"/>其他</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label class="col-sm-1 control-label text-right">自定义分隔符：</label>
                            <div class="col-md-1" style="padding-left:0">
                                <input id="customize" type="text"  class="form-control" style="width: 100px;" />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label class="col-sm-1 control-label text-right">是否包含表头：</label>
                            <div class="col-sm-5">
                                <label class="pull-left"><input type="radio" name="haveHead" value="true"/> 是</label>
                                <label class="pull-left m-l-15"><input type="radio" name="haveHead" value="false"/> 否</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12 clearfix">
                            <label class="col-sm-1 control-label text-right">字段前缀：</label>
                            <div class="col-sm-5">
                                <input id="delectChar1" type="text" class="form-control" name="wordStripPrefix"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12 clearfix">
                            <label class="col-sm-1 control-label text-right">字段后缀：</label>
                            <div class="col-sm-5">
                                <input id="delectChar2" type="text" class="form-control" name="wordStripSuffix"/>
                            </div>
                            <button type="button" class="btn btn-primary" id="handle">处理</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-12 table-wrap">
                        <table style="width:220%">
                            <thead>
                            <tr>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                                <th>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择字段--</option>
                                        <option value="-1">--通话日期--</option>
                                        <option value="-1">--通话时间--</option>
                                        <option value="-1">--通话时长--</option>
                                        <option value="-1">--机主号码--</option>
                                        <option value="-1">--对方号码--</option>
                                        <option value="-1">--呼叫类型--</option>
                                        <option value="-1">--机主串号--</option>
                                        <option value="-1">--对方串号--</option>
                                        <option value="-1">--机主CI--</option>
                                        <option value="-1">--对方CI--</option>
                                        <option value="-1">--机主loc--</option>
                                        <option value="-1">--对方loc--</option>
                                    </select>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>通话日期</td>
                                <td>
                                    <select class="form-control origin" name="callDate">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="col-sm-12">
                                        <div class="editor-slt-box">
                                            <input class="editor-input" name="callDateFormat" value=""/>
                                            <select class="editor-select" placeholder="请选择">
                                                <option>YYYY-MM-DD</option>
                                                <option>YYYY年MM月DD日</option>
                                                <option>YY-MM-DD</option>
                                                <option>YY年MM月DD日</option>
                                                <option>YYYY-MM-DD HH:MM:SS</option>
                                                <option>YYYY年MM月DD日 HH时MM分SS秒</option>
                                                <option>YY-MM-DD HH:MM:SS</option>
                                                <option>YY年MM月DD日 HH时MM分SS秒</option>
                                            </select>
                                            <span class="editor-del"><span class="glyphicon glyphicon-remove"></span></span>
                                        </div>
                                    </div>
                                </td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>通话时间</td>
                                <td>
                                    <select class="form-control origin" name="callTime">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="col-sm-12">
                                        <div class="editor-slt-box">
                                            <input class="editor-input_1" name="callTimeFormat" value=""/>
                                            <select class="editor-select_1" placeholder="请选择">
                                                <option>YYYY-MM-DD</option>
                                                <option>YYYY年MM月DD日</option>
                                                <option>YY-MM-DD</option>
                                                <option>YY年MM月DD日</option>
                                                <option>YYYY-MM-DD HH:MM:SS</option>
                                                <option>YYYY年MM月DD日 HH时MM分SS秒</option>
                                                <option>YY-MM-DD HH:MM:SS</option>
                                                <option>YY年MM月DD日 HH时MM分SS秒</option>
                                            </select>
                                            <span class="editor-del_1"><span class="glyphicon glyphicon-remove"></span></span>
                                        </div>
                                    </div>
                                </td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>通话时长</td>
                                <td>
                                    <select class="form-control origin" name="callLength">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>机主号码</td>
                                <td>
                                    <select class="form-control origin" name="num">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>对方号码</td>
                                <td>
                                    <select class="form-control origin" name="opNum">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>呼叫类型</td>
                                <td>
                                    <select class="form-control origin" name="callType">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="col-sm-12">
                                        <div class="form-inline" style="margin-bottom:10px">
                                            <div class="form-group">
                                                <label>电话主叫:</label>
                                                <input id="callType" type="text" class="form-control" name="callTypeStr"/>
                                            </div>
                                            <div class="form-group">
                                                <label>电话被叫:</label>
                                                <input id="calledType" type="text" class="form-control" name="calledTypeStr"/>
                                            </div>
                                            <div style="clear:both"></div>
                                        </div>
                                        <div class="form-inline" style="margin-bottom:10px">
                                            <div class="form-group">
                                                <label>短信主叫:</label>
                                                <input id="smsType" type="text" class="form-control" name="smsTypeStr"/>
                                            </div>
                                            <div class="form-group">
                                                <label>短信主叫:</label>
                                                <input id="smsedType" type="text" class="form-control" name="smsedTypeStr"/>
                                            </div>
                                            <div style="clear:both"></div>
                                        </div>
                                    </div>
                                </td>

                                <td id="callTypeEg" class="shili"></td>
                            </tr>
                            <tr>
                                <td>机主串号</td>
                                <td>
                                    <select class="form-control origin" name="imie">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>对方串号</td>
                                <td>
                                    <select class="form-control origin" name="opImie">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>机主CI</td>
                                <td>
                                    <select class="form-control origin" name="cellId">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>对方CI</td>
                                <td>
                                    <select class="form-control origin" name="opCellId">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>机主loc</td>
                                <td>
                                    <select class="form-control origin" name="localCode">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            <tr>
                                <td>对方loc</td>
                                <td>
                                    <select class="form-control origin" name="opLocalCode">
                                        <option value="-1">--请选择--</option>
                                    </select>
                                </td>
                                <td></td>

                                <td class="shili"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-sm-12 text-center" style="margin-top: 15px;">
                        <button id="formSubut" type="button" class="btn btn-primary">保存</button>
                        <button class="btn btn-default">返回</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div th:include="util/common_js"></div>
</body>
<script>
    /*<![CDATA[*/
    var data1;
    var data2;
    var handleString2;

    //表单数据整体提交
    $("#formSubut").click(function () {
        debugger;
        var data = $("#file-form").serialize();
        var url = "add";
        var returnData = fromSubmit(data, url, "POST");
        handReturnData(returnData)
    });

    //文件上传提交
    $("#uploadFile").click(function(){
        var url = "demo";
        var formData = new FormData($("#file-form")[0]);
        var retData =  uploadAjax(formData,url,true);
        //处理数据
        var code =retData.code;
        data1=retData.data.headStr;
        data2=retData.data.firstLine;
        alert(code+'---------'+data1);
        uploadAjax(formData,url,true);
        $("[name='headStr']").val(data1);
        $("[name='firstLine']").val(data2);
    });
    //处理按钮
    $("#handle").click(function(){
        $(".origin").empty();
        $(".shili").empty();
        $(".origin").append("<option value='-1'>--请选择--</option>")
        originalWord();
    })

    /*    //获取demo数据
     var url = "/ticket/template/demo";
     var formData = new FormData($("#file-form")[0]);
     var a = uploadAjax(formData,url);*/



    //分割字符串
    function originalWord(){
        var oString1 = data1;
        var oString2 = data2;
        var handleString1;
        var separator;
        if($("[name='splitColumn']:checked").length!=0){
            separator = $("[name='splitColumn']:checked").val()
        }else{
            separator = $("#customize").val();
        }
        handleString1 = oString1.split(separator);
        if(handleString1[handleString1.length-1]==""){
            handleString1.splice(handleString1.length-1,1);
        }
        handleString2 = oString2.split(separator);
//        handleString1=delectChar(handleString1);
        handleString2=delectChar(handleString2);//删除字符前缀字符后缀
        addWord(handleString1)
    }
    //将字段放入到多选框
    function addWord(arr1){
        for(var i = 0;i<arr1.length;i++){
            $(".origin").append("<option value='"+i+"'>"+arr1[i]+"</option>");
        }
    }
    //示例数据的显示
    $(".origin").change(function (){
        var i = $(this).val();
        if(handleString2[i]!=undefined){
            $(this).parent().next().next().html(handleString2[i]);
        }else{
            $(this).parent().next().next().empty();
        }
    })
    //去除前缀，后缀
    function delectChar(arr){
        var delectChar_1 = $("#delectChar1").val();//前缀
        var delectChar_2 = $("#delectChar2").val();//后缀
        for(var i= 0;i<arr.length;i++){
            if(delectChar_1!="" && arr[i].startsWith(delectChar_1)){
                arr[i] = arr[i].replace(delectChar_1,"");
            }
            if(delectChar_2!="" && arr[i].endsWith(delectChar_2)){
                arr[i] = arr[i].substring(0,arr[i].length-1);
            }
        }
        return arr
    }

    //呼叫类型
    $("#callType,#calledType,#smsType,#smsedType").change(function(){
        $("#callTypeEg").find('span').remove();
        var callTypeEg = $("#callTypeEg").text();
        var callType1,callType2,callType3,callType4;
        callType1 = $("#callType").val();
        callType2 = $("#calledType").val();
        callType3 = $("#smsType").val();
        callType4 = $("#smsedType").val();
        if($("#callTypeEg").text()!=""){
            if(callType1 == callTypeEg||callType2 == callTypeEg||callType3 == callTypeEg||callType4 == callTypeEg){
                $("#callTypeEg").css("color","green").append("<span class='glyphicon glyphicon-ok'></span>");
            }else{
                $("#callTypeEg").css("color","red").append("<span class='glyphicon glyphicon-remove'></span>");
            }
        }

    })

    //是否为表头
    $("[name='fileType']").click(function(){
        if($("[name='fileType']")[0].checked){
            $("#separator label input,#customize,[name='haveHead'],[name='wordStringSuffix'],[name='wordStringPrefix']").attr("disabled","disabled");
        }else if($("[name='fileType']")[1].checked){
            $("#separator label input,#customize,[name='haveHead'],[name='wordStringSuffix'],[name='wordStringPrefix']").removeAttr("disabled");
        }
    })
    /* function getTicket(){
     $.ajax({
     cache:true,
     type:"Post",
     url:"/ticket/template/demo",
     data:'',
     async:false,
     error:function(request){
     alert("Connection error" + request);
     },
     success: function(data){
     debugger;
     console.log(data);
     }
     })
     }*/
    $(function(){
        var flag = 0;
        //getTicket();
        //分隔符选择
        $("#customize").keyup(function(){
            if($("#customize").val()!=""){
                $("[name='splitColumn']:checked").attr("checked",false);
                $("[name='other']").prop("checked",true);
            }
        });
        $("#customize").change(function(){
            $("#customInput").val($("#customize").val());
            $("#customInput").prop("checked",true);
        })
        $("[name='splitColumn']").click(function(){
            $("[name='other']").attr("checked",false);
        });
        $("[name='other']").click(function(){
            $("[name='splitColumn']:checked").attr("checked",false);
        });
        $("#addDate").click(function(){
            $("#dialog").dialog({
                width:500,
                height:300
            });
            if(flag==0){
                $(".ui-dialog-titlebar-close").append('<span class="ui-button-icon ui-icon ui-icon-closethick"></span>')
                flag = 1;
            }
        })

        $(".editor-input").blur(function () {
            var val = $(".editor-input").val();
            if(!$.trim(val)==""){
                $(".editor-select").append("<option>"+ $.trim(val)+"</option>");
            }
        });
        $(".editor-select").click(function(){
            $(".editor-input").val($('.editor-select option:selected').text());
        });
        $(".editor-del").click(function(){
            $(".editor-select option:selected").remove();
            $(".editor-input").val("");
            return false;
        });

        $(".editor-input_1").blur(function () {
            var val = $(".editor-input_1").val();
            if(!$.trim(val)==""){
                $(".editor-select_1").append("<option>"+ $.trim(val)+"</option>");
            }
        });
        $(".editor-select_1").click(function(){
            $(".editor-input_1").val($('.editor-select_1 option:selected').text());
        });
        $(".editor-del_1").click(function(){
            $(".editor-select_1 option:selected").remove();
            $(".editor-input_1").val("");
            return false;
        });
    })
    /*]]>*/
</script>
</html>